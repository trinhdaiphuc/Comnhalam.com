<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/frame}">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <th:block layout:fragment="headCss">
        <!-- Switchery -->
        <link href="/admin/vendors/switchery/dist/switchery.min.css" rel="stylesheet">
    </th:block>
</head>
<body class="nav-md">

<div layout:fragment="content">
    <div class="page-title">
        <div class="title_left">
            <h3>User Profile</h3>
        </div>

        <div class="title_right">
            <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for...">
                    <span class="input-group-btn">
                                        <button class="btn btn-default" type="button">Go!</button>
                                    </span>
                </div>
            </div>
        </div>
    </div>

    <div class="clearfix"></div>

    <div class="row">
        <div class="col-md-3 col-sm-3 col-xs-3">
            <div class="x_panel">
                <div class="x_title">
                    <h2>Avatar User
                        <!-- <small>Activity report</small> -->
                    </h2>
                    <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                               aria-expanded="false"><i class="fa fa-wrench"></i></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#">Settings 1</a>
                                </li>
                                <li><a href="#">Settings 2</a>
                                </li>
                            </ul>
                        </li>
                        <li><a class="close-link"><i class="fa fa-close"></i></a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="my-img-profile">
                            <img th:src="@{${user.img}}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-9 col-xs-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>Infomation
                        <!-- <small>different form elements</small> -->
                    </h2>
                    <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                               aria-expanded="false"><i class="fa fa-wrench"></i></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#">Settings 1</a>
                                </li>
                                <li><a href="#">Settings 2</a>
                                </li>
                            </ul>
                        </li>
                        <li><a class="close-link"><i class="fa fa-close"></i></a>
                        </li>
                    </ul>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content">
                    <br />
                    <div class="form-horizontal form-label-left input_mask">

                        <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                            <input type="text" class="form-control has-feedback-left" id="inputSuccess2"
                                   placeholder="First Name" readonly th:value="${user.firstName}">
                            <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                        </div>

                        <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                            <input type="text" class="form-control" id="inputSuccess3" placeholder="Last Name" readonly
                            th:value="${user.lastName}">
                            <span class="fa fa-user form-control-feedback right" aria-hidden="true"></span>
                        </div>

                        <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                            <input type="text" class="form-control has-feedback-left" id="inputSuccess4"
                                   placeholder="Email" readonly th:value="${user.email}">
                            <span class="fa fa-envelope form-control-feedback left" aria-hidden="true"></span>
                        </div>

                        <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                            <input type="text" class="form-control" id="inputSuccess5" placeholder="Phone" readonly th:value="${user.numberPhone}">
                            <span class="fa fa-phone form-control-feedback right" aria-hidden="true"></span>
                        </div>

                        <form class="form-label-left">
                            <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Role</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <div class="" th:each="role : ${roles}">
                                        <label>
                                            <input type="checkbox" class="js-switch active-role"
                                                   th:attr="role = ${role.name}"
                                                   th:attrappend="user-id = ${user.id}"
                                                   th:utext="${' ' + role.name.substring(5)}" th:checked="${user.roles.contains(role)}"/>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Active</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <div class="">
                                        <label>
                                            <input type="checkbox" class="js-switch"
                                                   id="active-user"
                                                   th:attrappend="user-id = ${user.id}"
                                                   th:checked="${user.enabled}" />
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- <div class="ln_solid"></div> -->

                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<th:block layout:fragment="footerJs">
    <!-- Switchery -->
    <script src="/admin/vendors/switchery/dist/switchery.min.js"></script>
</th:block>

<th:block layout:fragment="js">
    <script>
        $('#active-user').change(function(e) {
            var id = $(this).attr('user-id');
            var checked = $(this).prop('checked') ? 'yes' : 'no';
            $.ajax({
                url: '/admin/active-user/' + id + '/' + checked,
                dataType: 'text',
                success: function(result) {
                    console.log(result);
                }
            });
        });

        $('.active-role').change(function(e) {
            var id = $(this).attr('user-id');
            var checked = $(this).prop('checked') ? 'yes' : 'no';
            var role = $(this).attr('role');
            $.ajax({
                url: '/admin/active-role/' + id + '/' + role + '/' + checked,
                dataType: 'text',
                success: function(result) {
                    console.log(result);
                }
            });
        });
    </script>
</th:block>

</body>
</html>